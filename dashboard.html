<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Book Collection Dashboard</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .cover-img { width: 40px; height: 60px; object-fit: cover; }
    </style>
</head>
<body>
    <header class="bg-primary text-white p-3 mb-4">
        <div class="container">
            <h1 class="mb-0">My Book Collection</h1>
            <nav class="mt-2">
                <a href="#" class="btn btn-light btn-sm me-2">Add New Book to Collection</a>
                <a href="#" class="btn btn-light btn-sm me-2">Browse All Books</a>
                <a href="#" class="btn btn-danger btn-sm" onclick="logout()">Logout</a>
            </nav>
        </div>
    </header>
    <div class="container">
        <div class="row mb-3">
            <div class="col-md-6 mb-2">
                <input type="text" id="searchInput" class="form-control" placeholder="Search by title, author, or genre">
            </div>
            <div class="col-md-2 mb-2">
                <button onclick="searchBooks()" class="btn btn-outline-primary w-100">Search</button>
            </div>
            <div class="col-md-4 mb-2">
                <div class="input-group">

                    
                </div>
            </div>
        </div>
        <!-- Add Book Form (Create) -->
        <form class="row g-2 align-items-end mb-4" id="addBookForm" onsubmit="addBook(event)">
            <div class="col-md-2">
                <input type="text" id="newTitle" class="form-control" placeholder="Title" required>
            </div>
            <div class="col-md-2">
                <input type="text" id="newAuthor" class="form-control" placeholder="Author(s)" required>
            </div>
            <div class="col-md-2">
                <input type="text" id="newGenre" class="form-control" placeholder="Genre(s)" required>
            </div>
            <div class="col-md-2">
                <select id="newReadStatus" class="form-select">
                    <option value="Read">Read</option>
                    <option value="Unread">Unread</option>
                </select>
            </div>
            <div class="col-md-1">
                <input type="number" id="newRating" class="form-control" placeholder="Rating" min="1" max="5">
            </div>
            <div class="col-md-2">
                <input type="text" id="newCover" class="form-control" placeholder="Cover Image URL">
            </div>
            <div class="col-md-1">
                <button type="submit" class="btn btn-success w-100">Add Book</button>
            </div>
        </form>
        <div class="table-responsive">
            <table class="table table-striped align-middle" id="booksTable">
                <thead class="table-dark">
                    <tr>
                        <th>Cover</th>
                        <th>Title</th>
                        <th>Author(s)</th>
                        <th>Genre(s)</th>
                        <th>Read Status</th>
                        <th>Rating</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="booksTbody">
                    <!-- Rows will be generated by JS -->
                </tbody>
            </table>
        </div>
    </div>
    <!-- Bootstrap JS Bundle CDN (for dropdowns, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample data (Read)
        let books = [
            {
                cover: "cover1.jpg",
                title: "The Great Gatsby",
                author: "F. Scott Fitzgerald",
                genre: "Classic, Fiction",
                read_status: "Read",
                rating: "5",
            },
            {
                cover: "cover2.jpg",
                title: "1984",
                author: "George Orwell",
                genre: "Dystopian, Sci-Fi",
                read_status: "Unread",
                rating: "",
            }
        ];

        function renderBooks() {
            const tbody = document.getElementById('booksTbody');
            tbody.innerHTML = '';
            books.forEach((book, idx) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><img src="${book.cover}" alt="Book Cover" class="cover-img rounded shadow-sm"></td>
                    <td>${book.title}</td>
                    <td>${book.author}</td>
                    <td>${book.genre}</td>
                    <td>${book.read_status}</td>
                    <td>${book.rating ? book.rating + '/5' : 'â€”'}</td>
                    <td>
                        <button class="btn btn-warning btn-sm me-1" onclick="editBook(${idx})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteBook(${idx})">Delete</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Create
        function addBook(e) {
            e.preventDefault();
            const title = document.getElementById('newTitle').value;
            const author = document.getElementById('newAuthor').value;
            const genre = document.getElementById('newGenre').value;
            const read_status = document.getElementById('newReadStatus').value;
            const rating = document.getElementById('newRating').value;
            const cover = document.getElementById('newCover').value || 'cover1.jpg';
            books.push({ cover, title, author, genre, read_status, rating });
            renderBooks();
            e.target.reset();
        }

        // Update
        function editBook(idx) {
            const tr = document.getElementById('booksTbody').children[idx];
            const book = books[idx];
            tr.innerHTML = `
                <td><input type="text" value="${book.cover}" id="editCover${idx}" class="form-control form-control-sm"></td>
                <td><input type="text" value="${book.title}" id="editTitle${idx}" class="form-control form-control-sm"></td>
                <td><input type="text" value="${book.author}" id="editAuthor${idx}" class="form-control form-control-sm"></td>
                <td><input type="text" value="${book.genre}" id="editGenre${idx}" class="form-control form-control-sm"></td>
                <td>
                    <select id="editReadStatus${idx}" class="form-select form-select-sm">
                        <option value="Read" ${book.read_status === 'Read' ? 'selected' : ''}>Read</option>
                        <option value="Unread" ${book.read_status === 'Unread' ? 'selected' : ''}>Unread</option>
                    </select>
                </td>
                <td><input type="number" min="1" max="5" value="${book.rating}" id="editRating${idx}" class="form-control form-control-sm"></td>
                <td>
                    <button class="btn btn-success btn-sm me-1" onclick="saveBook(${idx})">Save</button>
                    <button class="btn btn-secondary btn-sm" onclick="renderBooks()">Cancel</button>
                </td>
            `;
        }

        function saveBook(idx) {
            books[idx] = {
                cover: document.getElementById(`editCover${idx}`).value,
                title: document.getElementById(`editTitle${idx}`).value,
                author: document.getElementById(`editAuthor${idx}`).value,
                genre: document.getElementById(`editGenre${idx}`).value,
                read_status: document.getElementById(`editReadStatus${idx}`).value,
                rating: document.getElementById(`editRating${idx}`).value
            };
            renderBooks();
        }

        // Delete
        function deleteBook(idx) {
            if (confirm('Are you sure you want to delete this book?')) {
                books.splice(idx, 1);
                renderBooks();
            }
        }

        // Placeholder search and sort
        function searchBooks() {
            alert('Search functionality to be implemented.');
        }
        function sortBooks() {
            alert('Sort functionality to be implemented.');
        }

        // Initial render
        renderBooks();
        renderActivity();
    </script>
</body>
</html>           